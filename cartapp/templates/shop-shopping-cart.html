{% load static %}

{% load mathfilters %}

<!DOCTYPE html>
<!--[if !IE]><!-->
<html lang="en">
<!--<![endif]-->

<!-- Head BEGIN -->
<head>
  <meta charset="utf-8">
  <title>Zhea</title>

  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <meta content="Metronic Shop UI description" name="description">
  <meta content="Metronic Shop UI keywords" name="keywords">
  <meta content="keenthemes" name="author">

  <meta property="og:site_name" content="-CUSTOMER VALUE-">
  <meta property="og:title" content="-CUSTOMER VALUE-">
  <meta property="og:description" content="-CUSTOMER VALUE-">
  <meta property="og:type" content="website">
  <meta property="og:image" content="-CUSTOMER VALUE-"><!-- link to image for socio -->
  <meta property="og:url" content="-CUSTOMER VALUE-">

  <link rel="shortcut icon" href="{% static 'favicon.ico' %}">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">


  <!-- ALERTFIY CSS -->
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/css/alertify.min.css"/>
<!-- ALERTIFY Default theme -->
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/css/themes/default.min.css"/>


  <!-- Fonts START -->
  <link href="http://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700|PT+Sans+Narrow|Source+Sans+Pro:200,300,400,600,700,900&amp;subset=all" rel="stylesheet" type="text/css">
  <link href="http://fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400,600,700,900&amp;subset=all" rel="stylesheet" type="text/css"><!--- fonts for slider on the index page -->  
  <!-- Fonts END -->

  <!-- Global styles START -->          
  <link href="{% static 'assets/plugins/font-awesome/css/font-awesome.min.css' %}" rel="stylesheet">
  <link href="{% static 'assets/plugins/bootstrap/css/bootstrap.min.css' %}" rel="stylesheet">
  <!-- Global styles END --> 
   
  <!-- Page level plugin styles START -->
  <link href="{% static 'assets/pages/css/animate.css' %}" rel="stylesheet">
  <link href="{% static 'assets/plugins/fancybox/source/jquery.fancybox.css' %}" rel="stylesheet">
  <link href="{% static 'assets/plugins/owl.carousel/assets/owl.carousel.css' %}" rel="stylesheet">
  <!-- Page level plugin styles END -->

  <!-- Theme styles START -->
  <link href="{% static 'assets/pages/css/components.css' %}" rel="stylesheet">
  <link href="{% static 'assets/pages/css/slider.css' %}" rel="stylesheet">
  <link href="{% static 'assets/pages/css/style-shop.css' %}" rel="stylesheet" type="text/css">
  <link href="{% static 'assets/corporate/css/style.css' %}" rel="stylesheet">
  <link href="{% static 'assets/corporate/css/style-responsive.css' %}" rel="stylesheet">
  <link href="{% static 'assets/corporate/css/themes/red.css' %}" rel="stylesheet" id="style-color">
  <!-- Theme styles END -->
  <style>

    

    .container-plus {
      display: flex;
      width: 100%;
      ;
      flex-direction: column;
      justify-content: center;
      align-items: start;
    }
    .quantity-plus {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 0;
    }
    .quantity__minus,
    .quantity__plus {
      display: block;
      width: 22px;
      height: 31px;
      margin: 0;
      background: #dee0ee;
      text-decoration: none;
      text-align: center;
      line-height: 23px;
    }
    .quantity__minus:hover,
    .quantity__plus:hover {
      background: #575b71;
      color: #fff;
    } 
    .quantity__minus {
      border-radius: 3px 0 0 3px;
    }
    .quantity__plus {
      border-radius: 0 3px 3px 0;
    }
    .quantity__input {
      width: 34px;
      height: 31px;
      margin: 0;
      padding: 0;
      text-align: center;
      border-top: 2px solid #dee0ee;
      border-bottom: 2px solid #dee0ee;
      border-left: 1px solid #dee0ee;
      border-right: 2px solid #dee0ee;
      background: #fff;
      color: #8184a1;
    }
    .quantity__minus:link,
    .quantity__plus:link {
      color: #8184a1;
    } 
    .quantity__minus:visited,
    .quantity__plus:visited {
      color: #fff;
    }
  </style>


</head>
<!-- Head END -->

<!-- Body BEGIN -->
<body class="ecommerce">


{% include 'user/navbar.html'%}


    <div class="main">
      <div class="container">
        <!-- BEGIN SIDEBAR & CONTENT -->
        <div class="row margin-bottom-40">
          <!-- BEGIN CONTENT -->
          <div class="col-md-12 col-sm-12">
            <h1>Shopping cart</h1>
            <div class="goods-page">
              <div class="goods-data clearfix">
                <div class="table-wrapper-responsive">
                  
             {% if not cart_items %}
             <center><div >
                      <div class="d-flex justify-content-center" style="width: 100%; height:50%; ">
                      <img style="width: 20%; height:50%; object-fit: cover;"src="{% static 'assets/cart/Empty Cart.png' %}">
                    </div> <br>
                    <div >
                          <h2>Oops! Your cart is empty,</h2>
                          <h5>To Continue shopping,</h5>
                          <h3>Click below</h3>
                    <div class="d-flex justify-content-center">
              <a href="{% url 'index' %}" class="btn btn-default" type="submit">Continue shopping <i class="fa fa-shopping-cart"></i></a>
                    </div>
                    </div>
                  
             </div></center>
              {% else %}
                <table >
                  <tr>
                    <th class="goods-page-image">Image</th>
                    <th class="goods-page-description">Description</th>
                    <th class="goods-page-ref-no">Ref No</th>
                    <th class="goods-page-quantity">Quantity</th>
                    <th class="goods-page-price">Unit price</th>
                    <th class="goods-page-total" colspan="2">Total</th>
                  </tr>
                  {% for cart_item in cart_items %}
                  <tr>
                    <td class="goods-page-image">
                      <a href="javascript:;"><img src="{{cart_item.product.images.url}}" alt="Berry Lace Dress"></a>
                    </td>
                    <td class="goods-page-description">
                      <h3><a href="javascript:;">{{cart_item.product.product_name}}</a></h3>
                      <p><strong>Items-{{cart_item.quantity}}</strong> - Color: Green; Size: S</p>
                      <em>More info is here</em>
                    </td>
                    <td class="goods-page-ref-no">
                      javc2133
                    </td>
                    <td class="goods-page-quantity">
                      <!-- <div class="product-quantity">
                        <a href="{% url 'add_cart' cart_item.product.id %}"><input id="product-quantity" type="" value="{{cart_item.quantity}}"  class="form-control input-sm"></a></a>
                        
                      </div> -->
                      
                      <div class="container-plus">
  
                        <div class="quantity-plus">
                          <a href="{% url 'remove_cart' cart_item.product.id %}" class="quantity__minus"><span>-</span></a>
                          <input name="quantity" type="" id="{{cart_item.id}}" class="quantity__input" value="{{cart_item.quantity}}">
                          <button type="submit" onclick="add({{cart_item.id}})" class="quantity__plus"><span>+</span></button>
                        </div>
                        
                      </div> 
                    </td>

                    
                    <td class="">

                      {% if cart_item.product.pro_offer %}  
                      <small style="color: red; font-size: 15px;" >&#8377;{{cart_item.product.pro_offer.discount|mul:cart_item.product.price|div:100|sub:cart_item.product.price|abs}}</small>
                      {% else %}
                      
                      <small style="color: red; font-size: 15px;" >&#8377;{{cart_item.product.price}}</small>
                      {% endif %}
                    </td>
                    <td class="">
                      {% if cart_item.product.pro_offer %}  

                      <small style="color: red; font-size: 15px;" >&#8377;{{cart_item.product.pro_offer.discount|mul:cart_item.product.price|div:100|sub:cart_item.product.price|abs|mul:cart_item.quantity}}</small>


                      {% else %}
                      <small style="color: red; font-size: 15px;" >&#8377;{{cart_item.sub_total}}</small>

                      {% endif %}
                    
                    </td>
                    <td class="del-goods-col">
                      <a class="del-goods" href="{% url 'remove_cart_item' cart_item.product.id %}">&nbsp;</a>
                    </td>
                  </tr>
                  {% endfor %}

               
                  
               
                </table>
               
                {% endif %}
                </div>
                {% if not cart_items %}



                
              </div>
              <a href="{ url 'index' %}" class="btn btn-default" type="submit">Continue shopping <i class="fa fa-shopping-cart"></i></a>
              
             
              </div>
          </div>


                {% else %}
                <div class="shopping-total">
                  <ul>
                    <li>
                      <em>Sub total</em>
                      <strong class=""><span> Rs. </span>{{total}}</strong>
                    </li>
                    <li>
                      <em>tax</em>
                      <strong class="price"><span>Rs.</span>{{tax}}</strong>
                    </li>
                    <li class="shopping-total-price">
                      <em>Total</em>
                      <strong class="price"><span>Rs.</span>{{grand_total}}</strong>
                    </li>
                  </ul>
                </div>
                
              </div>
              <button class="btn btn-default" type="submit">Continue shopping <i class="fa fa-shopping-cart"></i></button>
              
              <a class="btn btn-primary" href="{% url 'checkout' %}">Checkout <i class="fa fa-check"></i></a>
            </div>
          </div>
          {% endif %}
          <!-- END CONTENT -->
        </div>
        <!-- END SIDEBAR & CONTENT -->

        <!-- BEGIN SIMILAR PRODUCTS -->
        <div class="row margin-bottom-40">
          <div class="col-md-12 col-sm-12">
            <h2>Most popular products</h2>
            <div class="owl-carousel owl-carousel4">
              {% for product in products %}
              <div>
                <div class="product-item">
                  <div class="pi-img-wrapper">
                    <img src="{{product.images.url}}" class="img-responsive" alt="Berry Lace Dress">
                    <div>
                      <a href="{{product.images.url}}" class="btn btn-default fancybox-button">Zoom</a>
                      <a href="#pop{{forloop.counter}}" class="btn btn-default fancybox-fast-view">View</a>
                    </div>
                  </div>
                  <h3><a href="{{ product.get_url }}">{{product.product_name}}</a></h3>
                  <div class="pi-price">&#x20B9;{{product.price}}</div>
                  <a href="javascript:;" class="btn btn-default add2cart">Add to cart</a>
                  <div class="sticker sticker-new"></div>
                </div>
              </div>
                {% endfor %}
  
            </div>
          </div>
        </div>
        <!-- END SIMILAR PRODUCTS -->
      </div>
    </div>

    <!-- BEGIN STEPS -->
    <div class="steps-block steps-block-red">
      <div class="container">
        <div class="row">
          <div class="col-md-4 steps-block-col">
            <i class="fa fa-truck"></i>
            <div>
              <h2>Free shipping</h2>
              <em>Express delivery withing 3 days</em>
            </div>
            <span>&nbsp;</span>
          </div>
          <div class="col-md-4 steps-block-col">
            <i class="fa fa-gift"></i>
            <div>
              <h2>Daily Gifts</h2>
              <em>3 Gifts daily for lucky customers</em>
            </div>
            <span>&nbsp;</span>
          </div>
          <div class="col-md-4 steps-block-col">
            <i class="fa fa-phone"></i>
            <div>
              <h2>477 505 8877</h2>
              <em>24/7 customer care available</em>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- END STEPS -->
    {% include 'user/prefooter.html' %}


    <!-- BEGIN FOOTER -->
    <div class="footer">
      <div class="container">
        <div class="row">
          <!-- BEGIN COPYRIGHT -->
          <div class="col-md-4 col-sm-4 padding-top-10">
            2015 © Keenthemes. ALL Rights Reserved. 
          </div>
          <!-- END COPYRIGHT -->
          <!-- BEGIN PAYMENTS -->
          <div class="col-md-4 col-sm-4">
            <ul class="list-unstyled list-inline pull-right">
              <li><img src="{% static 'assets/corporate/img/payments/western-union.jpg' %}" alt="We accept Western Union" title="We accept Western Union"></li>
              <li><img src="{% static 'assets/corporate/img/payments/american-express.jpg' %}" alt="We accept American Express" title="We accept American Express"></li>
              <li><img src="{% static 'assets/corporate/img/payments/MasterCard.jpg' %}" alt="We accept MasterCard" title="We accept MasterCard"></li>
              <li><img src="{% static 'assets/corporate/img/payments/PayPal.jpg' %}" alt="We accept PayPal" title="We accept PayPal"></li>
              <li><img src="{% static 'assets/corporate/img/payments/visa.jpg' %}" alt="We accept Visa" title="We accept Visa"></li>
            </ul>
          </div>
          <!-- END PAYMENTS -->
          <!-- BEGIN POWERED -->
          <div class="col-md-4 col-sm-4 text-right">
            <p class="powered">Powered by: <a href="http://www.keenthemes.com/">KeenThemes.com</a></p>
          </div>
          <!-- END POWERED -->
        </div>
      </div>
    </div>
    <!-- END FOOTER -->
 
    <!-- BEGIN fast view of a product -->
    {% for prod in products %}
       
    
    <div id="pop{{forloop.counter}}" style="display: none; width: 700px;">
     
      <div class="product-page ">
       
        <div class="row">
          
          <div class="col-md-6 col-sm-6 col-xs-3">
           
            <div class="product-main-image">
            
              <img src="{{prod.images.url}}" alt="" class="img-responsive">
             
            </div>
          
            <div class="product-other-images">
              <a href="javascript:;" class="active"><img alt="Berry Lace Dress" src="{% static 'assets\pages\img\people\img1-large.jpg' %} "></a>
              <a href="javascript:;"><img alt="Berry Lace Dress" src="{{prod.images.url}}"></a>
              <a href="javascript:;"><img alt="Berry Lace Dress" src="{{prod.images.url}}"></a>
            </div>
           
          </div>
         
          
          <div class="col-md-6 col-sm-6 col-xs-9">
            <h2>{{ prod.product_name }}</h2>
            <div class="price-availability-block clearfix">
              <div class="price">
                <strong><span>₹</span>47.00</strong>
                <em>₹<span>62.00</span></em>
              </div>
              <div class="availability">
                Availability: <strong>In Stock</strong>
              </div>
            </div>
            <div class="description">
              <p>Lorem ipsum dolor ut sit ame dolore  adipiscing elit, sed nonumy nibh sed euismod laoreet dolore magna aliquarm erat volutpat Nostrud duis molestie at dolore.{{prod.product_name}}</p>
            </div>
            <div class="product-page-options">
              <div class="pull-left">
                <label class="control-label">Size:</label>
                <select class="form-control input-sm">
                  <option>L</option>
                  <option>M</option>
                  <option>XL</option>
                </select>
              </div>
              <div class="pull-left">
                <label class="control-label">Color:</label>
                <select class="form-control input-sm">
                  <option>Red</option>
                  <option>Blue</option>
                  <option>Black</option>
                </select>
              </div>
            </div>
            <div class="product-page-cart">
              <div class="product-quantity">
                  <input id="product-quantity" type="text" value="1" readonly name="product-quantity" class="form-control input-sm">
              </div>
              <button class="btn btn-primary" type="submit">Add to cart</button>
              <a href="shop-item.html" class="btn btn-default">More details</a>
            </div>
          </div>

          
        </div>
      
        
      </div> 
     
</div> 

{% endfor %}




<script>
  function getCookie(name) {
      let cookieValue = null;
      if (document.cookie && document.cookie !== '') {
          const cookies = document.cookie.split(';');
          for (let i = 0; i < cookies.length; i++) {
              const cookie = cookies[i].trim();
              // Does this cookie string begin with the name we want?
              if (cookie.substring(0, name.length + 1) === (name + '=')) {
                  cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                  break;
              }
          }
      }
      return cookieValue;
  }
  var csrftoken = getCookie('csrftoken');
  
  function add(id)
  {
      
      sendData();
      console.log('hello')
      function sendData(){
          console.log('hello')
          fetch('/cart/add_cart_ajax/',{
              method : "POST",
              headers : {
                  "Content-type" : "application/jason",
                  "X-CSRFToken": csrftoken,
              },
              body:JSON.stringify({
                  
                  id: id,

                  
              }),
          })
          .then(response => response.json())
          .then((data) => { 
              document.getElementById(id).value = data.quantity;
              
      });
  }

      // Replace the above to show a success message within this page, e.g.
      // const element = document.getElementById('paypal-button-container');
      // element.innerHTML = '';
      // element.innerHTML = '<h3>Thank you for your payment!</h3>';
      // Or go to another URL:  actions.redirect('thank_you.html');
 
}
  



</script>






    <!-- END fast view of a product -->

    <!-- Load javascripts at bottom, this will reduce page load time -->
    <!-- BEGIN CORE PLUGINS (REQUIRED FOR ALL PAGES) -->
    <!--[if lt IE 9]>
    <script src="{% static 'assets/plugins/respond.min.js' %}"></script>  
    <![endif]-->  
    <script src="{% static 'assets/plugins/jquery.min.js' %}" type="text/javascript"></script>
    <script src="{% static 'assets/plugins/jquery-migrate.min.js' %}" type="text/javascript"></script>
    <script src="{% static 'assets/plugins/bootstrap/js/bootstrap.min.js' %}" type="text/javascript"></script>      
    <script src="{% static 'assets/corporate/scripts/back-to-top.js' %}" type="text/javascript"></script>
    <script src="{% static 'assets/plugins/jquery-slimscroll/jquery.slimscroll.min.js' %}" type="text/javascript"></script>
    <!-- END CORE PLUGINS -->

    <!-- BEGIN PAGE LEVEL JAVASCRIPTS (REQUIRED ONLY FOR CURRENT PAGE) -->
    <script src="{% static 'assets/plugins/fancybox/source/jquery.fancybox.pack.js' %}" type="text/javascript"></script><!-- pop up -->
    <script src="{% static 'assets/plugins/owl.carousel/owl.carousel.min.js' %}" type="text/javascript"></script><!-- slider for products -->
    <script src="{% static 'assets/plugins/zoom/jquery.zoom.min.js' %}" type="text/javascript"></script><!-- product zoom -->
    <script src="{% static 'assets/plugins/bootstrap-touchspin/bootstrap.touchspin.js' %}" type="text/javascript"></script>   Quantity
    <script src="{% static 'assets/plugins/uniform/jquery.uniform.min.js' %}" type="text/javascript"></script>
    <script src="{% static 'assets/plugins/rateit/src/jquery.rateit.js' %}" type="text/javascript"></script>
    <script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js" type="text/javascript"></script><!-- for slider-range -->
    <script src="{% static 'assets/corporate/scripts/layout.js' %}" type="text/javascript"></script>



    <script type="text/javascript">
        jQuery(document).ready(function() {
            Layout.init();    
            Layout.initOWL();
            Layout.initTwitter();
            Layout.initImageZoom();
            Layout.initTouchspin();
            Layout.initUniform();
            Layout.initSliderRange();

            Layout.initFixHeaderWithPreHeader();
            Layout.initNavScrolling();
        });
    </script>
    <!-- END PAGE LEVEL JAVASCRIPTS -->
</body>
<!-- END BODY -->
</html>